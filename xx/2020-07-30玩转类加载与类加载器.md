https://docs.oracle.com/javase/8/docs/technotes/tools/unix/java.html

## 类生命周期是什么？

加载（Loading）、验证（Verification）、准备（Preparation）、解析（Resolution）、 初始化（Initialization）、使用（Using）和卸载（Unloading）7 个阶段。其中验证、准备、解析 3 个部分统称为连接（Linking）

## 加载阶段虚拟机需要完成以下 3 件事？

1）通过一个类的全限定名来获取定义此类的二进制字节流。

 2）将这个字节流所代表的静态存储结构转化为方法区的运行时数据结构。

 3）在内存中生成一个代表这个类的 java.lang.Class 对象，作为方法区这个类的各种数据的访问入口。

## 类生命周期里的验证有哪些？

文件格式验证、元数据验证、字节码验证、符号引用验证。

## 类生命周期里的准备是什么？

零值

## 类生命周期里的解析是什么？

解析阶段是 JVM 将常量池内的符号引用替换为直接引用的过程。 

类或接口的解析 

字段解析 

类方法解析 

接口方法解析 

java.lang.NoSuchFieldError 根据继承关系从下往上，找不到相关字段时的报错。（字段解析异常） 

java.lang.IllegalAccessError 字段或者方法，访问权限不具备时的错误。（类或接口的解析异常） 

java.lang.NoSuchMethodError 找不到相关方法时的错误。（类方法解析、接口方法解析时发生的异常）

## 三层类加载器有哪些？

启扩应



继承关系：

ClassLoader

SecureClassLoader

URLClassLoader

AppClassLoader、ExtClassLoader

## 双亲委派机制是什么？

双亲委派模式是在Java 1.2后引入的，其工作原理的是，如果一个类加载器收到了类加载请求，它并不会自己先去加载，而是把这个请求委托给父类的加载器去执行，如果父类加载器还存在其父类加载器，则进一步向上委托，依次递归，请求最终将到达顶层的启动类加载器，如果父类加载器可以完成类加载任务，就**成功返回**，倘若父类加载器无法完成此加载任务，**子加载器才会尝试自己去加载**，这就是双亲委派模式

## 如何破坏双亲委派机制？

重写loadClass方法。

重写findClass方法，不会打破。

## Tomcat类加载机制是什么？

Common、 Shared、 WebApp、 Jsp

Catalina



那么 tomcat 是怎么打破双亲委派机制的呢？可以看图中的 WebAppClassLoader，它加载自己目录下的 .class 文件，并不会传递给父类的加载器。

为了项目隔离

## 什么是spi？

第一， 可以让你更好的看到一个打破规则的案例(虽然应该是属于 BootStrap 类加载器加载的，但是还是在 app 类加载器去加载的它)。

 第二，这个问题面试时出现的几率也是比较高的，你需要好好理解。



JDBC

线程的上下文类加载器



## 什么是osgi？

OSGi（开放服务网关协议，Open Service Gateway Initiative）技术是Java动态化[模块化](https://baike.baidu.com/item/%E6%A8%A1%E5%9D%97%E5%8C%96/3295536)系统的一系列规范。OSGi一方面指维护OSGi规范的OSGI官方联盟，另一方面指的是该组织维护的基于Java语言的服务（业务）规范。简单来说，OSGi可以认为是Java平台的模块层。OSGi服务平台向Java提供服务，这些服务使Java成为软件集成和软件开发的首选环境。OSGi技术提供允许应用程序使用精炼、可重用和可协作的组件构建的标准化原语，这些组件能够组装进一个应用和部署中



